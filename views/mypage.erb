<!DOCTYPE html>
<html>
    <head>
    <style>
    	#header {
    	background-color:black;
    	color:white;
    	text-align:center;
    	padding:5px;
	}
	#nav {
    	line-height:30px;
    	background-color:#eeeeee;
    	height:300px;
    	width:100px;
    	float:left;
    	padding:5px;	      
	}
	#section {
    	width:350px;
    	float:left;
   	padding:10px;	 	 
	}
	#footer {
    	background-color:black;
    	color:white;
    	clear:both;
    	text-align:center;
   	padding:5px;	 	 
	}
    </style>
        
    </head>
	<body>
	<div id="header">
		<h1>My User Page</h1>
	</div>


<form action='/logout' method="GET">
<input type="submit" value = "Logout" style="float: right;"/>
</form>

<form action="/profile" method="GET">
<input type="submit" value = "Profile" style="float: left;"/>      
</form>

<form action="/loggedin_root" method="GET">
<input type="submit" value = "loggedin_root" style="float: right;"/>      
</form>

<br><br>

<div id="nav">
Picture<br>
Profile<br>
Follower number<br>
Followed number<br>
</div>

<div id="section">
<h2>Tweet area</h2>
<p>
<form action="tweet" method="POST"> <!--Update the tweets through methods in /tweet-->
	<textarea name="tweet_content" placeholder = "Post a tweet here" cols=80 rows=5/>
		
	</textarea>
	<br/>
	<br/>
	<input type="submit" value="Post Tweet" style="width:100px"/>
	<input type="hidden" name="path" value="/mypage">
</form>
</p>
<% @tweets.each do |tweet| %>
 	<% @user_id= tweet.user_id %>
 	<% user = User.find_by(id: @user_id)%>
 	<% user_name = user.user_name%>
	<p><a href="/user_page?user_id=<%= @user_id %>"> <%= user_name %> </a>
	<% diff = (Time.now - tweet.created_at).to_i %>
 		<% if diff < 60 %>	
			<%= diff %>s ago </p>
		<% elsif diff >= 60 && diff < 3600 %>
			<%= (diff / 60).to_i %>m ago</p>
		<% elsif diff >= 3600 && diff < 86400 %>
			<%= (diff / 3600).to_i %>h ago</p>
		<% else  %>
			<%= (diff / 86400).to_i %>d ago</p>
		<% end %>
	<%= tweet.text%>	
	<br/>
<% end %>
</div>

<div id="footer">
Copyright Â© nanotwitter group
</div>
</body>
</html>
